本次社区技术委员会例会已结束，本次会议共 16 人参与（含旁听），另有一人因事请假未参与本次会议。

本次例会仍然采用了 hedgedoc 进行协作编辑来得到会议纪要，下附的会议纪要由协作编辑的结果得来。完整内容如下：

--------------------------------

2023/6 TC 例会
===

## 参会人员：

- BLumia
- Shiputx
- Zeno
- lwj786
- toyland
- black_desk
- 赖洪圣
- justforlxz
- 王波
- Felix Yan
- revy
- Waleon

### 已请假人员：

- zccrs

## 本次议题

### xzl 的软件包退出流程 RFC

大致上没有反对意见或新的有争议的内容。目前剩余的待解决问题有两个：

1. 相关配置仍在 SIG 仓库不太合理：可以移出来，比较好说。
2. 暂时没有完全单独面向社区的安全团队：暂时不在文档中写关于安全团队的说明

@caitongxun: 一个软件可能存在多个版本，旧的版本肯能不再受到官方上游支持，可能也不再受到我们自身支持，这类软件包是否应当退出，在当前的 rfc 文档中的描述可能有些模糊。

@black-desk: 是否应当增加一个新的组件，用于存放不受支持但还可以用的，且用户期望使用的软件包？或者是否应当提供一个类似 AUR 的解决方案？对于此问题，需要对具体的候选解决方案进行调研并进行分析。可以考虑讲候选方案具体的提出，以便后续讨论的展开。

### 关于是否可以在 DDE 组件中使用新技术

现有组件中，部分组件存在较多内存管理等方面的问题，这些问题的解决方案是什么？

1. 完善 CI 基础设施
2. 使用可能规避这种问题的技术或语言（比如 rust 等）

其中，2 是一个需要深思熟虑才能决策的点，对于新的技术，我们需要考虑它在不同平台的支持情况，以及所涉及到的基础工具（比如 dbus 配置生成）支持情况，以及所涉及的维护团队的技术栈等。因此，对于现有核心组件，若希望尝试使用新技术，需要对上述问题进行调研再进行决策。在没有这类调研的基础上，暂时不推荐采取此类技术进行核心组件的研发。

### deepin 对 riscv 与 loongarch 的支持能否合入

@zeno补充
1. 暂无机器，会后确认后续机器问题
2. 升级gcc等底层依赖库风险问题需谨慎

@revy
- 工具链升级潜在因素
    - 升级GCC 13 之后 riscv 方面测试 coremark 有 10% 左右性能提升
- loongarch 方面 GCC 可选版本只有12/13 12版本没有其他发行版再采用了 本身也有一些故障
- 12: pandoc 会明确编译失败 因为 cmodel 的支持大小存在问题 这样会引申其他大型软件包 link 阶段会同样失败
- 13: 加入的 cmodel=middle 解决了上述问题 / cmodel 的行为和已适配 uos 的部分 loongarch 源码是冲突的 具体例子就是 qtwebengine 内使用的龙架构 cmodel=large 这个不存在 也是潜在源码冲突
- 13+：龙芯方面最近还在提交关于 lsx/lasx 相关支持 还没有进入主线 所以未来一定要合并这个向量特性
    - loongarch 方面 glibc 可选版本是2.36/2.37
- 2.36：第一个合并并且引入稳定的 shlibs-version 这样GLIBC 的符号兼容性大大提高
        - 2.37：改善了性能问题问题 部分操作对齐之后性能有很大提升
        - 2.37+：正在引入上述 lsx/lasx 相关组件 改写部分操作可加速
    - loongarch 方面 binutils 可选版本是2.40/2.40+
- 2.40: 选入原因是测试过这个是 loongarch 新版 reloc 行为，之前的版本没有仔细关注 有可能有旧版 reloc 希望不引入旧版 reloc
- 2.40+：lsx/lasx 相关指令 op 添加 / 增加连接器松弛技术，可以一定程度上解决上述 cmodel 相关问题
    - lsx / lasx：向量化潜在风险
- 官网暂时未提供操作手册 现在可能是需要签署 NDA 才可以获得 有问题可能无法修复
- 内核升级潜在因素
- 现在发布最新的内核 v6.4 最新合并了 kvm 相关特性 内核未来特性也有 lsx / lasx， 所以可能暂时要频繁 follow 上游内核
    - 龙芯二进制翻译功能的内核支持 可能需要 backport 到使用内核上
- 软件合并潜在问题
- openjdk11/17 都使用 lsx / lasx 相关寄存器/功能 需要提前把功能 backport 到主线内核上
- 机器支持问题
    - 对于机型的选定 3A5000/2K1000LA/2k500/3A6000/3C5000L/3C5000
    - 2K1000LA/2k500 不支持 lasx 可能移植需要看对当前机器特性识别相关问题
    - 微架构分为 LA464/LA664
        - LA464: 3A5000/3C5000L/3C5000
            - 潜在问题是某些浮点需要上 .dbar 0x0700
            - 如果不用 可能会导致潜在的浮点运算错误的问题
        - LA664: 3A6000
            - 不需要这个内存 dbar barrier
            - 使用了会导致运算性能下降
        - 上述可能会存在机型支持抉择问题
- 硬件问题
    - 7A2000 桥片问题
        - 经过 7A2K 桥片的 AMD 显卡存在部分花屏
        - 7A1K 无此问题
        - 现在龙芯主要售卖的机器都采取了 7A2K 桥片
        - 可能是推进桌面化的阻碍点
    - 需要用户更新 bios
        - 部分机器在推出的时候 是不兼容现在社区的内核的 需要更新bios
        - 部分机器不遵守规范 没有兼容社区的内核的 BIOS
- 软件问题
    - 混用新旧世界适配软件包
        - 合并之后会有潜在的用户去安装旧世界软件包 需要想办法区分
    - rust 1.70合并入了主线版本 1.71 会发stable版本
        - 需要升级对应工具链
    - 其他杂项包有很多升级工作/backport特性工作
- riscv 相关杂项问题
- 现在已经确定支持的部分机型中 有部分GPU只有gles没有opengl 是否要保持主线兼容 还是采取补充仓库的形式
    - riscv相关内核维护工作没有进行 没有仔细对deepin要求的内核特性进行梳理
- linglong 相关
    - linglong 现在还不支持 riscv/loongarch
    - 希望作为 deepin 的卖点 增加第一方支持
